I'll quickly open `options.html` to see how to set the backend URL from the UI, so the instructions are accurate.

[6 tools called]

### Инструкция: запуск нового расширения с LangGraph-бэкендом

- Важно: расширение уже готово работать с любым бэкендом, на который укажете в настройках. Мы развернули новый бэкенд на LangGraph в `backend_lg` и будем использовать его.

### 1) Подготовка окружения и запуск бэкенда
- Откройте терминал в `D:\_project\Chrome-lg\backend_lg`.
- Создайте venv и установите зависимости:
```powershell
python -m venv .venv
.\.venv\Scripts\python.exe -m pip install --upgrade pip
.\.venv\Scripts\pip.exe install -r backend_lg\requirements.txt
```
- Убедитесь, что в корне репозитория есть `.env.local` с ключами:
```text
GEMINI_API_KEY=ваш_ключ
EXA_API_KEY=ваш_ключ

установиь путь графической копии графа

```
$env:LANGGRAPH_VIZ_PATH="D:\_project\Chrome-lg\graph.svg"
```

- Запустите сервер:
```powershell
cd D:\_project\Chrome-lg\backend_lg
.\.venv\Scripts\python.exe -m uvicorn app.main:app --host 127.0.0.1 --port 8010
```
- Проверьте, что отвечает:
```powershell
Invoke-WebRequest http://127.0.0.1:8010/ -UseBasicParsing | % Content
```
Ожидается: {"status":"ok","engine":"langgraph"}

### 2) Установка и запуск расширения в Chrome
- Откройте Chrome  Введите в адресной строке: `chrome://extensions/`
- Включите <Режим разработчика>.
- Нажмите <Загрузить распакованное> и выберите папку проекта `D:\_project\Chrome-lg`.
- Убедитесь, что расширение активно.

### 3) Настроить URL бэкенда в расширении
- В всплывающем окне расширения нажмите <Настройки> или откройте `options.html`.
- В поле <URL бэкенда (FastAPI)> укажите:
```
http://127.0.0.1:8010
```
- Нажмите <Сохранить>.

Примечание:
- Расширение по умолчанию использует ключ `backendBaseUrl` из Chrome Storage; значение по умолчанию - `http://localhost:8000`. Нам нужно явно поставить новый адрес `http://127.0.0.1:8010`.

### 4) Использование
- Откройте страницу в браузере (любую).
- Откройте боковую панель расширения (клик по иконке  Side Panel открывается автоматически).
- Введите вопрос в поле в сайдпанели и нажмите <Отправить>.
- Расширение забирает актуальный контекст страницы и вызывает `/chat` нового бэкенда.

### 5) Проверка быстрой связки
- В сайдпанели задайте простой вопрос по текущей странице (например: <Кратко: о чём эта страница?>).
- Для страниц с недостаточным контентом бэкенд выполнит поиск EXA и добавит источники в ответ.

### 6) Если нужно стартовать бэкенд как сервис
- Можно запускать так:
```powershell
Start-Process -WindowStyle Hidden -FilePath "D:\_project\Chrome-lg\backend_lg\.venv\Scripts\python.exe" -ArgumentList "-m uvicorn app.main:app --host 127.0.0.1 --port 8010"
```

### 7) Частые вопросы
- Если ответ <пустой> или <ключ не найден> - проверьте `.env.local`.
- Если расширение пишет <Ошибка сервера: 404/500> - проверьте, что настроен `http://127.0.0.1:8010` в <Настройки>.
- Если не открывается сайдпанель - убедитесь, что расширение включено, и попробуйте обновить вкладку.

Готов помочь, если захотите перенести это в `README` и добавить кнопки быстрого переключения URL внутри интерфейса.